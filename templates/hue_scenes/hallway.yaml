# Hallway [Hue room]
- trigger:
    - trigger: state
      id: scene_change
      entity_id:
        - scene.hallway_evening
        # Downstairs (zone)
        - scene.hallway_downstairs_daytime
        - scene.hallway_downstairs_daytime_reduced
        - scene.hallway_downstairs_evening
        - scene.hallway_downstairs_movie
        - scene.hallway_downstairs_nightlight
        # Upstairs (zone)
        - scene.hallway_upstairs_daytime
        - scene.hallway_upstairs_nightlight
      to: ~
    - trigger: state
      id: button_press
      entity_id:
        - event.hallway_downstairs_switch_button_1
        - event.hallway_downstairs_switch_button_2
        - event.hallway_downstairs_switch_button_3
        # event.hallway_downstairs_switch_button_4 – lights off
        - event.hallway_upstairs_switch_button_1
        - event.hallway_upstairs_switch_button_2
        - event.hallway_upstairs_switch_button_3
        # event.hallway_upstairs_switch_button_4 – lights off
      to: ~
    - trigger: state
      id: lights_off
      entity_id: light.hallway
      to: "off"
  sensor:
    - name: Hue scene (Hallway)
      unique_id: 78756b75-6316-48bc-b31e-d6b7614e842b
      icon: mdi:movie-filter
      state: >-
        {% if trigger.id == 'lights_off' %}
          «Off»
        {% elif trigger.id == 'scene_change' %}
          {% if trigger.entity_id in ['scene.hallway_evening'] %}
            Evening
          {%
            elif trigger.entity_id in ['scene.hallway_downstairs_evening'] and
              states('sensor.hue_scene_hallway_upstairs') == 'Evening'
          %}
            Evening
          {% else %}
            «Zones»
          {% endif %}
        {% elif
          trigger.id == 'button_press' and
            trigger.to_state.attributes.event_type == 'initial_press'
        %}
          {% if trigger.entity_id in
            [
              'event.hallway_downstairs_switch_button_1',
              'event.hallway_downstairs_switch_button_2',
              'event.hallway_downstairs_switch_button_3',
              'event.hallway_upstairs_switch_button_1',
              'event.hallway_upstairs_switch_button_2',
              'event.hallway_upstairs_switch_button_3'
            ]
          %}
            «Override»
          {% endif %}
        {% else %}
          {{ this.state }}
        {% endif %}
      attributes:
        light_id: light.hallway_downstairs
      availability: >-
        {{ has_value('light.hallway_downstairs') }}
# Hallway – downstairs [Hue zone]
- trigger:
    - trigger: state
      id: scene_change
      entity_id:
        - scene.hallway_downstairs_daytime
        - scene.hallway_downstairs_daytime_reduced
        - scene.hallway_downstairs_evening
        - scene.hallway_downstairs_movie
        - scene.hallway_downstairs_nightlight
        - scene.hallway_evening
      to: ~
    - trigger: state
      id: lights_off
      entity_id: light.hallway_downstairs
      to: "off"
  sensor:
    - name: Hue scene (Hallway – downstairs)
      unique_id: 1a6ee3e1-363a-4b2b-aa94-78fdfc133c14
      icon: mdi:movie-filter
      state: >-
        {% if trigger.id == 'lights_off' %}
          «Off»
        {% elif trigger.id == 'scene_change' %}
          {% if trigger.entity_id in ['scene.hallway_downstairs_daytime'] %}
            Daytime
          {% elif trigger.entity_id in ['scene.hallway_downstairs_daytime_reduced'] %}
            Daytime (reduced)
          {% elif trigger.entity_id in
            [
              'scene.hallway_downstairs_evening',
              'scene.hallway_evening'
            ]
          %}
            Evening
          {% elif trigger.entity_id in ['scene.hallway_downstairs_movie'] %}
            Movie
          {% elif trigger.entity_id in ['scene.hallway_downstairs_nightlight'] %}
            Nighlight
          {% endif %}
        {% else %}
          {{ this.state }}
        {% endif %}
      attributes:
        light_id: light.hallway_downstairs
      availability: >-
        {{ has_value('light.hallway_downstairs') }}
# Hallway – upstairs [Hue zone]
- trigger:
    - trigger: state
      id: scene_change
      entity_id:
        - scene.hallway_upstairs_daytime
        - scene.hallway_upstairs_evening
        - scene.hallway_upstairs_nightlight
        - scene.hallway_evening
      to: ~
    - trigger: state
      id: lights_off
      entity_id: light.hallway_upstairs
      to: "off"
  sensor:
    - name: Hue scene (Hallway – upstairs)
      unique_id: 886d950c-5b92-491d-aa4a-3c32c8418291
      icon: mdi:movie-filter
      state: >-
        {% if trigger.id == 'lights_off' %}
          «Off»
        {% elif trigger.id == 'scene_change' %}
          {% if trigger.entity_id in ['scene.hallway_upstairs_daytime'] %}
            Daytime
          {% elif trigger.entity_id in
            [
              'scene.hallway_upstairs_evening',
              'scene.hallway_evening'
            ]
          %}
            Evening
          {% elif trigger.entity_id in ['scene.hallway_upstairs_nightlight'] %}
            Nighlight
          {% endif %}
        {% else %}
          {{ this.state }}
        {% endif %}
      attributes:
        light_id: light.hallway_upstairs
      availability: >-
        {{ has_value('light.hallway_upstairs') }}
