api_version: 2
host: eu-central-1-1.aws.cloud2.influxdata.com
token: !secret influxdb_token
organization: !secret influxdb_organization
bucket: home-assistant
tags:
  source: HA
tags_attributes:
  - friendly_name
# Ignore immutable/irrelevant attributes
ignore_attributes:
  - icon
  - supported_features
default_measurement: units
precision: s
include:
  entities:
    - sensor.power_tariff
    - sensor.power_consumption # kW
    - sensor.energy_consumption_tarif_1 # off-peak (kWh)
    - sensor.energy_consumption_tarif_2 # peak (kWh)
    - sensor.gas_consumption # cumulative
    - sensor.hourly_gas_consumption # computed; prefer "gas_consumption"
    - group.family # occupancy
    - binary_sensor.vacation_mode
    - sensor.time_of_day
    - media_player.nvidia_shield_tv
    # WeeWX
    - sensor.weewx_outside_temperature
    - sensor.weewx_outside_temperature_balcony
    - sensor.weewx_solar_irradiance
    - sensor.weewx_wind_speed
    - sensor.weewx_rain_hour
    - sensor.weewx_outside_humidity
    # Temperatures
    - sensor.temperature_3 # Attic
    - sensor.temperature_9 # Bedroom
    - sensor.temperature_21 # Kitchen
    - sensor.temperature_24 # Bathroom
    - sensor.temperature_27 # Shed
    - sensor.temperature_30 # Hallway
    - sensor.temperature_37 # Guestroom
    - sensor.temperature_78 # Basement
    # Air quality
    - sensor.qingping_air_monitor_lite_bedroom_environment_co2_density
    - sensor.qingping_air_monitor_lite_living_room_environment_co2_density
    - sensor.xiaomi_miot_environment_co2_density
    - sensor.qingping_air_monitor_lite_bedroom_environment_pm2_5_density
    - sensor.qingping_air_monitor_lite_living_room_environment_pm2_5_density
    - sensor.xiaomi_miot_environment_pm2_5_density
    - sensor.qingping_air_monitor_lite_bedroom_environment_pm10_density
    - sensor.qingping_air_monitor_lite_living_room_environment_pm10_density
    - sensor.xiaomi_miot_environment_pm10_density
    - fan.sonair_guestroom
    - fan.sonair_living_room
    - fan.sonair_wardrobe
    - light.smart_relay_1 # Bathroom exhaust fan
    - switch.smart_plug_6 # Attic exhaust fan
    - group.openclose_bedroom
    # tado°
    - sensor.tado_smart_thermostat_temperature # Living room temperature
    - sensor.tado_smart_radiator_attic_temperature
    - sensor.tado_smart_ac_control_attic_temperature
    - sensor.tado_smart_thermostat_setpoint
    - sensor.tado_smart_radiator_attic_setpoint
    - sensor.tado_smart_ac_control_attic_setpoint
    - sensor.tado_living_room_heating
    - sensor.tado_attic_heating
    - binary_sensor.tado_living_room_power
    - binary_sensor.tado_attic_power
    - binary_sensor.tado_attic_ac_power
    # Appliances
    - sensor.power_41 # Electric heater (Shed)
    - sensor.power_57 # Close-in boiler (Kitchen)
    - sensor.power_83 # Dryer
    - sensor.power_86_actual # Washing machine
    - sensor.power_88_actual # Dishwasher
    - sensor.power_99 # Airco (Attic)
    - sensor.power_all_lights
    - sensor.ups_power_usage
    - sensor.power_108 # Television (i.e. Multimedia hub)
    - sensor.power_sonair_combined
    # Internet / Network
    - sensor.dd_wrt_1_google_dns_roundtrip_time
    - sensor.dd_wrt_1_wan_in_mbps
    - sensor.dd_wrt_1_wan_out_mbps
    - sensor.pi_hole_dns_unique_clients
    # Arlo – track battery levels to have some insight into how well they hold
    # up over time...
    - sensor.aarlo_battery_level_front
    - sensor.aarlo_battery_level_back
# Ignore immutable/irrelevant attributes
# N.B. There appears to be an issue in the InfluxDB integration which causes
# overlapping combinations of "component_config_domain" and "..._glob" to be
# ignored. For now, either define a domain or one (or more) globs for entities
# in that domain, don't define both!
component_config_domain:
  fan:
    ignore_attributes:
      - speed_list
      - preset_modes
      - percentage_step
      - preset_mode # Sonair fans don't use preset-mode
  group:
    ignore_attributes:
      # Ignore group member entity IDs – irrelevant and might contain PII (e.g.,
      # in the case of group.family)
      - entity_id
      - order
  light:
    ignore_attributes:
      - is_deconz_group
      - supported_color_modes
component_config:
  media_player.nvidia_shield_tv:
    ignore_attributes:
      - adb_response
      - hdmi_input
component_config_glob:
  # Ignore the voltage, current and temperature measurements provided by the
  # smart-plugs – there are better temperature measurements available; the
  # voltage/current measurements are redundant
  "sensor.power_*":
    ignore_attributes:
      - voltage
      - current
      - temperature
  # Tado heating-sensors include the timestamp e of their last state change –
  # if ever relevant, can easily be inferred from the underlying data...
  "sensor.tado_*_heating":
    ignore_attributes:
      - time
  # Aarlo sensors include some irrelevant device details
  "sensor.aarlo_*":
    ignore_attributes:
      - attribution
      - brand
      - camera_name # Could/should be inferred from friendly_name
      - device_id # Device serial-# (sort of PII)
      - model
  # Qingping air monitors duplicates their measurement/state inside an
  # environment.XXX attribute – ignore those
  "sensor.qingping_air_monitor_lite_*":
    ignore_attributes:
      - environment.co2_density
      - environment.pm2_5_density
      - environment.pm10_density
  "sensor.xiaomi_miot_*":
    ignore_attributes:
      - environment.co2_density
      - environment.pm2_5_density
      - environment.pm10_density
