tts_p20:
  alias: TTS P20HD
  sequence:
    - service: notify.mobile_app_p20hd_eea
      data:
        message: TTS
        title: >-
          {{ message }}
        data:
          channel: alarm_stream
          ttl: 0
          priority: high
  mode: single
  icon: mdi:text-to-speech
persistent_notification_all_devices:
  alias: Persistent notification (all devices)
  variables:
    clickAction: lovelace-home
    lovelaceMessage: >-
      {{ message }}
      {% if image is defined %}

        ![embedded image]({{ image }})
      {% endif %}
    ttl: >-
      {% if criticalNotification is true %}
        0
      {% endif %}
    priority: >-
      {% if criticalNotification is true %}
        high
      {% endif %}
  sequence:
    - service: notify.all_devices
      data:
        title: >-
          {{ title }}
        message: >-
          {{ message }}
        data:
          tag: >-
            {{ tag }}
          clickAction: >-
            {{ clickAction }}
          image: >-
            {% if image is defined %}
              {{ image }}
            {% endif %}
          ttl: >-
            {{ ttl }}
          priority: >-
            {{ priority }}
    - service: persistent_notification.create
      data:
        title: >-
          {{ title }}
        message: >-
          {{ lovelaceMessage }}
        notification_id: >-
          {{ tag }}
  mode: single
  icon: mdi:message-plus-outline
persistent_notification_devices_at_home:
  alias: Persistent notification (devices at home)
  variables:
    clickAction: lovelace-home
    lovelaceMessage: >-
      {{ message }}
      {% if image is defined %}

        ![embedded image]({{ image }})
      {% endif %}
    ttl: >-
      {% if criticalNotification is true %}
        0
      {% endif %}
    priority: >-
      {% if criticalNotification is true %}
        high
      {% endif %}
  sequence:
    - choose:
        - conditions:
            - condition: state
              entity_id: device_tracker.gm1913
              state: home
          sequence:
            - service: notify.mobile_app_gm1913
              data:
                title: >-
                  {{ title }}
                message: >-
                  {{ message }}
                data:
                  tag: >-
                    {{ tag }}
                  clickAction: >-
                    {{ clickAction }}
                  image: >-
                    {% if image is defined %}
                      {{ image }}
                    {% endif %}
                  ttl: >-
                    {{ ttl }}
                  priority: >-
                    {{ priority }}
      default: []
    - choose:
        - conditions:
            - condition: state
              entity_id: device_tracker.sm_g930f
              state: home
          sequence:
            - service: notify.mobile_app_sm_g930f
              data:
                title: >-
                  {{ title }}
                message: >-
                  {{ message }}
                data:
                  tag: >-
                    {{ tag }}
                  clickAction: >-
                    {{ clickAction }}
                  image: >-
                    {% if image is defined %}
                      {{ image }}
                    {% endif %}
                  ttl: >-
                    {{ ttl }}
                  priority: >-
                    {{ priority }}
      default: []
    - service: persistent_notification.create
      data:
        title: >-
          {{ title }}
        message: >-
          {{ lovelaceMessage }}
        notification_id: >-
          {{ tag }}
  mode: single
  icon: mdi:message-processing-outline
persistent_notification_my_devices:
  alias: Persistent notification (my devices)
  variables:
    clickAction: lovelace-home
    lovelaceMessage: >-
      {{ message }}
      {% if image is defined %}

        ![embedded image]({{ image }})
      {% endif %}
    ttl: >-
      {% if criticalNotification is true %}
        0
      {% endif %}
    priority: >-
      {% if criticalNotification is true %}
        high
      {% endif %}
  sequence:
    - service: notify.mobile_app_gm1913
      data:
        title: >-
          {{ title }}
        message: >-
          {{ message }}
        data:
          tag: >-
            {{ tag }}
          clickAction: >-
            {{ clickAction }}
          image: >-
            {% if image is defined %}
              {{ image }}
            {% endif %}
          ttl: >-
            {{ ttl }}
          priority: >-
            {{ priority }}
    - service: persistent_notification.create
      data:
        title: >-
          {{ title }}
        message: >-
          {{ lovelaceMessage }}
        notification_id: >-
          {{ tag }}
  mode: single
  icon: mdi:message-outline
